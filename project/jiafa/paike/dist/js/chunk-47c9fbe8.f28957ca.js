(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47c9fbe8"],{"0bb6":function(e,t,s){"use strict";s("3c0e")},"3c0e":function(e,t,s){},de10:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"teacher-timetable"},[s("div",{staticClass:"left"},[s("a-tree",{attrs:{"tree-data":e.teaListst,"replace-fields":e.replaceFields,blockNode:!0,expandedKeys:e.openKeys,selectedKeys:e.selectedKeys},on:{expand:e.onExpand,select:e.onSelect}})],1),s("div",{staticClass:"right"},[s("div",{staticClass:"select"},[e._v(" 筛选："),s("a-checkbox-group",{attrs:{disabled:e.tableLoading,value:e.checkedList,options:e.plainOptions},on:{change:e.onChange}})],1),s("div",{staticClass:"rightcontent"},[s("a-table",{staticClass:"timetable",attrs:{scroll:{y:"calc(100vh - 280px)"},columns:e.columns,"data-source":e.timetableList,loading:e.tableLoading,pagination:!1,rowKey:function(e){return e.id},bordered:""},scopedSlots:e._u([{key:"lesSort",fn:function(t){return[s("b",[e._v(" "+e._s(t)+" ")])]}},e._l(e.lesWeek,(function(t,n){return{key:t,fn:function(t){return[s("div",{key:n},e._l(t,(function(t,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isHoliday&&t.lesId,expression:"!i.isHoliday && i.lesId"}],key:n,staticClass:"unit"},[e.filtrateStatus.course?s("b",{staticClass:"little-unit"},[e._v(e._s(t.lesSub)+e._s(1==t.dbWeek?"[单周]":2==t.dbWeek?"[双周]":""))]):e._e(),s("p",[e._l(t.lesTeacher,(function(n,a){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.filtrateStatus.teacher&&n.main,expression:"filtrateStatus.teacher && o.main"}],key:a},[e._v(e._s(n.name)+" "),s("a-popover",{directives:[{name:"show",rawName:"v-show",value:t.lesTeacher.length>1,expression:"i.lesTeacher.length > 1"}],attrs:{trigger:"hover",content:e.getLesTeacher(t.lesTeacher)}},[s("a-icon",{staticStyle:{"font-size":"15px",cursor:"pointer",color:"#1890ff"},attrs:{type:"user"}})],1)],1)})),e._v(" "+e._s(e.filtrateStatus.classRoom&&e.filtrateStatus.teacher?"/":"")+" "),s("span",[e._v(e._s(e.filtrateStatus.classRoom?t.lesPlace:""))])],2),s("span",{staticClass:"little-unit"},[e._v(e._s(e.filtrateStatus.class?t.classes+"/":"")+e._s(t.lesStu)+"人")])])})),0)]}}}))],null,!0)})],1)])])},a=[],r=s("0951"),i=s.n(r),o=s("dad3");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e,t,s,n,a,r,i){try{var o=e[r](i),l=o.value}catch(c){return void s(c)}o.done?t(l):Promise.resolve(l).then(n,a)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(n,a){var r=e.apply(t,s);function i(e){d(r,n,a,i,o,"next",e)}function o(e){d(r,n,a,i,o,"throw",e)}i(void 0)}))}}var f=[{title:"时段",dataIndex:"diffNoon",key:"diffNoon",align:"center",width:"6%",scopedSlots:{customRender:"diffNoon"},customCell:function(){return{style:{background:"#fafafa"}}},customRender:function(e,t){return{children:t.diffNoon,attrs:{rowSpan:t.diffNoonRowSpan}}}},{title:"节次",dataIndex:"lesSort",key:"lesSort",align:"center",width:"10%",scopedSlots:{customRender:"lesSort"},customCell:function(){return{style:{background:"#fafafa"}}}},{title:"星期一",dataIndex:"lesMon",key:"lesMon",align:"center",width:"12%",scopedSlots:{customRender:"lesMon"},slots:{title:"lesMon"}},{title:"星期二",dataIndex:"lesTue",key:"lesTue",align:"center",width:"12%",scopedSlots:{customRender:"lesTue"},slots:{title:"lesTue"}},{title:"星期三",dataIndex:"lesWed",key:"lesWed",align:"center",width:"12%",scopedSlots:{customRender:"lesWed"},slots:{title:"lesWed"}},{title:"星期四",dataIndex:"lesThu",key:"lesThu",align:"center",width:"12%",scopedSlots:{customRender:"lesThu"},slots:{title:"lesThu"}},{title:"星期五",dataIndex:"lesFri",key:"lesFri",align:"center",width:"12%",scopedSlots:{customRender:"lesFri"},slots:{title:"lesFri"}},{title:"星期六",dataIndex:"lesSat",key:"lesSat",align:"center",width:"12%",scopedSlots:{customRender:"lesSat"},slots:{title:"lesSat"}},{title:"星期日",dataIndex:"lesSun",key:"lesSun",align:"center",width:"12%",scopedSlots:{customRender:"lesSun"},slots:{title:"lesSun"}}],p=(o["b"],{name:"TeacherTimetable",components:{},props:{},data:function(){return{columns:f,timetableList:[],plainOptions:["教师","教室","班级","课程"],checkedList:["教师","教室","班级","课程"],tableLoading:!1,teaListst:[],replaceFields:{children:"list",title:"teacherName",key:"teacherId"},selectedKeys:[],openKeys:[],lesWeek:["lesMon","lesTue","lesWed","lesThu","lesFri","lesSat","lesSun"]}},computed:{filtrateStatus:function(){var e=this.checkedList,t={teacher:e.includes("教师"),classRoom:e.includes("教室"),class:e.includes("班级"),course:e.includes("课程")};return t}},mounted:function(){this.arrLessonId=sessionStorage.getItem("arrLessonId"),this.getTeacherList()},methods:{onChange:function(e){if(!e.length)return this.$message.warn("至少勾选一个");this.checkedList=e},getLesTeacher:function(e){var t="副教师：",s=e.filter((function(e){return!e.main}));return s.map((function(e,s){e.main||(0==s?t+=e.name:t=t+"/"+e.name)})),t},toggleClass:function(e){this.getTeacherTimetable(e)},getTeacherList:function(){var e=this;return h(i.a.mark((function t(){var s,n,a,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.arrLessonId,t.next=3,e.$api.ArrLessonRule.getTeacherList({planId:s});case 3:n=t.sent,200==n.code?(a=n.data||[],r="",a.map((function(t,s){t.teacherName=t.group,t.teacherId=t.groupId,t.list&&t.list.length&&!r&&(r=t.list[0].teacherId,e.openKeys=[t.groupId])})),e.teaListst=a,e.selectedKeys=[r],r&&e.getTeacherTimetable(r)):e.$message.error("请求失败！"+res.message);case 5:case"end":return t.stop()}}),t)})))()},onExpand:function(e,t){this.openKeys=e},onSelect:function(e,t){if(e&&e.length){var s=e[0],n=t.selectedNodes[0].data.props.groupId;if(n){var a=this.openKeys.findIndex((function(e){return e===n}));-1!==a?this.openKeys.splice(a,1):this.openKeys.push(n)}else this.selectedKeys=e,this.getTeacherTimetable(s)}},getTeacherTimetable:function(e){var t=this;return h(i.a.mark((function s(){var n,a,r;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=t.arrLessonId,a={arrLessonId:n,teacherId:e},t.tableLoading=!0,s.next=5,t.$api.PreviewTimetable.getTeacherTimetable(a);case 5:r=s.sent,200==r.code?(t.timetableList=r.data.list,t.rowSpanMerge("diffNoon")):t.$message.error("请求失败！"+r.message),t.tableLoading=!1;case 8:case"end":return s.stop()}}),s)})))()},rowSpanMerge:function(e){var t=this,s=this.timetableList.reduce((function(t,s){return t.indexOf(s[e])<0&&t.push(s[e]),t}),[]).reduce((function(s,n){var a=t.timetableList.filter((function(t){return t[e]===n}));return s=s.concat(a.map((function(t,s){return c(c({},t),{},u({},"".concat(e,"RowSpan"),0===s?a.length:0))}))),s}),[]);this.timetableList=s}}}),m=p,g=(s("0bb6"),s("cba8")),b=Object(g["a"])(m,n,a,!1,null,"41c34a5d",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-47c9fbe8.f28957ca.js.map