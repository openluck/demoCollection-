{"version":3,"sources":["webpack:///./src/views/SmartArrLesson/ArrLesson/PreviewTimetable/Components/ClassroomTimetable.vue?b213","webpack:///./src/views/SmartArrLesson/ArrLesson/PreviewTimetable/Components/ClassroomTimetable.vue?e7c3","webpack:///src/views/SmartArrLesson/ArrLesson/PreviewTimetable/Components/ClassroomTimetable.vue","webpack:///./src/views/SmartArrLesson/ArrLesson/PreviewTimetable/Components/ClassroomTimetable.vue?c961","webpack:///./src/views/SmartArrLesson/ArrLesson/PreviewTimetable/Components/ClassroomTimetable.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","treeData","children","key","value","title","parentCode","placeType","disabled","expandedKeys","selectedKeys","on","expand","handleSelect","_v","tableLoading","checkedList","plainOptions","onChange","y","columns","timetableList","row","id","scopedSlots","_u","_l","item","index","fn","text","i","d","directives","name","rawName","isHoliday","expression","filtrateStatus","_s","lesSub","dbWeek","_e","o","q","teacher","main","lesTeacher","length","getLesTeacher","staticStyle","classRoom","lesPlace","class","classes","lesStu","staticRenderFns","components","props","data","showTree","lesWeek","seleLoading","computed","includes","course","obj","mounted","arrLessonId","sessionStorage","getItem","getClassroomTree","methods","$message","warn","_lesTeacher","map","con","rowSpanMerge","arr","hasChildren","getClassroomTimetable","treeDataFormat","list","getFirstClassId","placeId","getFirstExpande","component"],"mappings":"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","file":"js/chunk-be45b5ee.c75c5990.js","sourcesContent":["export * from \"-!../../../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./ClassroomTimetable.vue?vue&type=style&index=0&id=04884703&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"classroom-timetable\"},[_c('div',{staticClass:\"left\"},[(_vm.showTree)?_c('a-tree',{attrs:{\"tree-data\":_vm.treeData,\"replaceFields\":{\n        children: 'children',\n        key: 'placeId',\n        value: 'placeId',\n        title: 'placeName',\n        parentCode: 'parentCode',\n        placeType: 'placeType',\n        disabled: 'disabled',\n      },\"expandedKeys\":_vm.expandedKeys,\"showLine\":\"\",\"selectedKeys\":_vm.selectedKeys},on:{\"expand\":_vm.expand,\"select\":_vm.handleSelect}}):_c('div',{staticClass:\"left-spin\"},[_c('a-spin')],1)],1),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"select\"},[_vm._v(\" 筛选：\"),_c('a-checkbox-group',{attrs:{\"disabled\":_vm.tableLoading,\"value\":_vm.checkedList,\"options\":_vm.plainOptions},on:{\"change\":_vm.onChange}})],1),_c('div',{staticClass:\"rightcontent\"},[_c('a-table',{staticClass:\"timetable\",attrs:{\"scroll\":{ y: 'calc(100vh - 280px)' },\"columns\":_vm.columns,\"data-source\":_vm.timetableList,\"loading\":_vm.tableLoading,\"pagination\":false,\"rowKey\":function (row) { return row.id; },\"bordered\":\"\"},scopedSlots:_vm._u([_vm._l((_vm.lesWeek),function(item,index){return {key:item,fn:function(text){return [_c('div',{key:index},_vm._l((text),function(i,d){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!text.isHoliday),expression:\"!text.isHoliday\"}],key:d,staticClass:\"unit\"},[(_vm.filtrateStatus.course)?_c('b',{staticClass:\"little-unit\"},[_vm._v(_vm._s(i.lesSub)+_vm._s(i.dbWeek == 1 ? \"[单周]\" : i.dbWeek == 2 ? \"[双周]\" : \"\"))]):_vm._e(),_c('div',{staticClass:\"little-unit\"},[_vm._l((i.lesTeacher),function(o,q){return _c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.filtrateStatus.teacher && o.main),expression:\"filtrateStatus.teacher && o.main\"}],key:q},[_vm._v(_vm._s(o.name)+\" \"),_c('a-popover',{directives:[{name:\"show\",rawName:\"v-show\",value:(i.lesTeacher.length > 1),expression:\"i.lesTeacher.length > 1\"}],attrs:{\"trigger\":\"hover\",\"content\":_vm.getLesTeacher(i.lesTeacher)}},[_c('a-icon',{staticStyle:{\"font-size\":\"15px\",\"cursor\":\"pointer\",\"color\":\"#1890ff\"},attrs:{\"type\":\"user\"}})],1)],1)}),_vm._v(\" \"+_vm._s(_vm.filtrateStatus.classRoom && _vm.filtrateStatus.teacher ? \"/\" : \"\")+\" \"),_c('span',[_vm._v(_vm._s(_vm.filtrateStatus.classRoom ? i.lesPlace : \"\"))])],2),_c('div',{staticClass:\"little-unit\"},[_vm._v(\" \"+_vm._s(_vm.filtrateStatus.class ? i.classes + \"/\" : \"\")+_vm._s(i.lesStu)+\"人 \")])])}),0)]}}}),{key:\"lesSort\",fn:function(text){return [_c('b',[_vm._v(\" \"+_vm._s(text)+\" \")])]}}],null,true)})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @descripttion: 预览课表-教室课表\r\n * @version: v1.0\r\n * @Author: WuQiao\r\n * @Date: 2021-5-28 13:26:12\r\n-->\r\n<template>\r\n  <div class=\"classroom-timetable\">\r\n    <div class=\"left\">\r\n      <a-tree\r\n        v-if=\"showTree\"\r\n        :tree-data=\"treeData\"\r\n        :replaceFields=\"{\r\n          children: 'children',\r\n          key: 'placeId',\r\n          value: 'placeId',\r\n          title: 'placeName',\r\n          parentCode: 'parentCode',\r\n          placeType: 'placeType',\r\n          disabled: 'disabled',\r\n        }\"\r\n        :expandedKeys=\"expandedKeys\"\r\n        @expand=\"expand\"\r\n        showLine\r\n        @select=\"handleSelect\"\r\n        :selectedKeys=\"selectedKeys\"\r\n      />\r\n\r\n      <div class=\"left-spin\" v-else>\r\n        <a-spin />\r\n      </div>\r\n    </div>\r\n    <div class=\"right\">\r\n      <div class=\"select\">\r\n        筛选：<a-checkbox-group\r\n          :disabled=\"tableLoading\"\r\n          :value=\"checkedList\"\r\n          :options=\"plainOptions\"\r\n          @change=\"onChange\"\r\n        />\r\n      </div>\r\n      <div class=\"rightcontent\">\r\n        <a-table\r\n          class=\"timetable\"\r\n          :scroll=\"{ y: 'calc(100vh - 280px)' }\"\r\n          :columns=\"columns\"\r\n          :data-source=\"timetableList\"\r\n          :loading=\"tableLoading\"\r\n          :pagination=\"false\"\r\n          :rowKey=\"(row) => row.id\"\r\n          bordered\r\n        >\r\n          <!-- <div class=\"vacation\" v-if=\"timetableList.length && timetableList[0].lesMon.isHoliday\">休假</div> -->\r\n          <!-- 周一到周日课程 -->\r\n          <template\r\n            v-for=\"(item, index) in lesWeek\"\r\n            :slot=\"item\"\r\n            slot-scope=\"text\"\r\n          >\r\n            <div :key=\"index\">\r\n              <div\r\n                v-show=\"!text.isHoliday\"\r\n                class=\"unit\"\r\n                :key=\"d\"\r\n                v-for=\"(i, d) in text\"\r\n              >\r\n                <b class=\"little-unit\" v-if=\"filtrateStatus.course\"\r\n                  >{{ i.lesSub\r\n                  }}{{\r\n                    i.dbWeek == 1 ? \"[单周]\" : i.dbWeek == 2 ? \"[双周]\" : \"\"\r\n                  }}</b\r\n                >\r\n                <div class=\"little-unit\">\r\n                  <!-- <span v-for=\"(o, q) in i.lesTeacher\" :key=\"q\">{{ o.name }}</span> -->\r\n                  <span\r\n                    v-for=\"(o, q) in i.lesTeacher\"\r\n                    :key=\"q\"\r\n                    v-show=\"filtrateStatus.teacher && o.main\"\r\n                    >{{ o.name }}\r\n                    <a-popover\r\n                      trigger=\"hover\"\r\n                      :content=\"getLesTeacher(i.lesTeacher)\"\r\n                      v-show=\"i.lesTeacher.length > 1\"\r\n                    >\r\n                      <a-icon\r\n                        type=\"user\"\r\n                        style=\"font-size: 15px; cursor: pointer; color: #1890ff\"\r\n                      />\r\n                    </a-popover>\r\n                  </span>\r\n                  {{\r\n                    filtrateStatus.classRoom && filtrateStatus.teacher\r\n                      ? \"/\"\r\n                      : \"\"\r\n                  }}\r\n                  <span>{{ filtrateStatus.classRoom ? i.lesPlace : \"\" }}</span>\r\n                </div>\r\n                <div class=\"little-unit\">\r\n                  {{ filtrateStatus.class ? i.classes + \"/\" : \"\"\r\n                  }}{{ i.lesStu }}人\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <template slot=\"lesSort\" slot-scope=\"text\">\r\n            <b>\r\n              {{ text }}\r\n            </b>\r\n          </template>\r\n        </a-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nimport { list, treeData } from \"./data\";\r\nconst columns = [\r\n  {\r\n    title: \"时段\",\r\n    dataIndex: \"diffNoon\",\r\n    key: \"diffNoon\",\r\n    align: \"center\",\r\n    width: \"6%\",\r\n    scopedSlots: { customRender: \"diffNoon\" },\r\n    customCell() {\r\n      return {\r\n        style: {\r\n          background: \"#fafafa\",\r\n        },\r\n      };\r\n    },\r\n    customRender(_, row) {\r\n      return {\r\n        children: row.diffNoon,\r\n        attrs: {\r\n          rowSpan: row.diffNoonRowSpan,\r\n        },\r\n      };\r\n    },\r\n  },\r\n  {\r\n    title: \"节次\",\r\n    dataIndex: \"lesSort\",\r\n    key: \"lesSort\",\r\n    align: \"center\",\r\n    width: \"10%\",\r\n    scopedSlots: { customRender: \"lesSort\" },\r\n    customCell() {\r\n      return {\r\n        style: {\r\n          background: \"#fafafa\",\r\n        },\r\n      };\r\n    },\r\n  },\r\n  {\r\n    title: \"星期一\",\r\n    dataIndex: \"lesMon\",\r\n    key: \"lesMon\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesMon\" },\r\n    slots: { title: \"lesMon\" },\r\n  },\r\n  {\r\n    title: \"星期二\",\r\n    dataIndex: \"lesTue\",\r\n    key: \"lesTue\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesTue\" },\r\n    slots: { title: \"lesTue\" },\r\n  },\r\n  {\r\n    title: \"星期三\",\r\n    dataIndex: \"lesWed\",\r\n    key: \"lesWed\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesWed\" },\r\n    slots: { title: \"lesWed\" },\r\n  },\r\n  {\r\n    title: \"星期四\",\r\n    dataIndex: \"lesThu\",\r\n    key: \"lesThu\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesThu\" },\r\n    slots: { title: \"lesThu\" },\r\n  },\r\n  {\r\n    title: \"星期五\",\r\n    dataIndex: \"lesFri\",\r\n    key: \"lesFri\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesFri\" },\r\n    slots: { title: \"lesFri\" },\r\n  },\r\n  {\r\n    title: \"星期六\",\r\n    dataIndex: \"lesSat\",\r\n    key: \"lesSat\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesSat\" },\r\n    slots: { title: \"lesSat\" },\r\n  },\r\n  {\r\n    title: \"星期日\",\r\n    dataIndex: \"lesSun\",\r\n    key: \"lesSun\",\r\n    align: \"center\",\r\n    width: \"12%\",\r\n    scopedSlots: { customRender: \"lesSun\" },\r\n    slots: { title: \"lesSun\" },\r\n  },\r\n];\r\nconst timetableList = [];\r\nexport default {\r\n  name: \"ClassroomTimetable\",\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n      columns,\r\n      timetableList,\r\n      tableLoading: true,\r\n      plainOptions: [\"教师\", \"教室\", \"班级\", \"课程\"],\r\n      checkedList: [\"教师\", \"教室\", \"班级\", \"课程\"],\r\n      showTree: false,\r\n      treeData: [],\r\n      expandedKeys: [],\r\n      selectedKeys: [\"\"], //左侧树选中项\r\n      lesWeek: [\r\n        \"lesMon\",\r\n        \"lesTue\",\r\n        \"lesWed\",\r\n        \"lesThu\",\r\n        \"lesFri\",\r\n        \"lesSat\",\r\n        \"lesSun\",\r\n      ],\r\n      seleLoading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    /**\r\n     * @desc 筛选状态\r\n     */\r\n    filtrateStatus() {\r\n      const { checkedList } = this;\r\n      let obj = {\r\n        teacher: checkedList.includes(\"教师\"),\r\n        classRoom: checkedList.includes(\"教室\"),\r\n        class: checkedList.includes(\"班级\"),\r\n        course: checkedList.includes(\"课程\"),\r\n      };\r\n      return obj;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.arrLessonId = sessionStorage.getItem(\"arrLessonId\");\r\n    this.getClassroomTree();\r\n  },\r\n  methods: {\r\n    onChange(checkedList) {\r\n      if (!checkedList.length) return this.$message.warn(\"至少勾选一个\");\r\n      this.checkedList = checkedList;\r\n    },\r\n    getLesTeacher(lesTeacher) {\r\n      let con = \"副教师：\";\r\n      let _lesTeacher = lesTeacher.filter((item) => !item.main);\r\n      _lesTeacher.map((item, index) => {\r\n        if (!item.main) {\r\n          if (index == 0) {\r\n            con += item.name;\r\n          } else {\r\n            con = con + \"/\" + item.name;\r\n          }\r\n        }\r\n      });\r\n      return con;\r\n    },\r\n    // 表格第一列合并\r\n    rowSpanMerge(key) {\r\n      const arr = this.timetableList\r\n        .reduce((result, item) => {\r\n          if (result.indexOf(item[key]) < 0) {\r\n            result.push(item[key]);\r\n          }\r\n          return result;\r\n        }, [])\r\n        .reduce((result, keys) => {\r\n          const children = this.timetableList.filter(\r\n            (item) => item[key] === keys\r\n          );\r\n          result = result.concat(\r\n            children.map((item, index) => ({\r\n              ...item,\r\n              [`${key}RowSpan`]: index === 0 ? children.length : 0,\r\n            }))\r\n          );\r\n          return result;\r\n        }, []);\r\n      this.timetableList = arr;\r\n    },\r\n    expand(expand) {\r\n      this.expandedKeys = expand;\r\n    },\r\n    // 左侧树选择事件\r\n    handleSelect(selectedKeys, e) {\r\n      let hasChildren =\r\n        e.node.dataRef.children && e.node.dataRef.children.length;\r\n      if (this.seleLoading || !selectedKeys.length || hasChildren) return;\r\n      this.seleLoading = true;\r\n      this.selectedKeys = selectedKeys;\r\n      this.getClassroomTimetable(selectedKeys[0]);\r\n    },\r\n    treeDataFormat(list) {\r\n      return list.map((item, index) => {\r\n        if (item.children && item.children.length) {\r\n          // item.disabled = true;\r\n          item.children = this.treeDataFormat(item.children);\r\n        }\r\n        return item;\r\n      });\r\n    },\r\n    getFirstClassId(item, id) {\r\n      if (item.children && item.children.length) {\r\n        return this.getFirstClassId(item.children[0], id);\r\n      }\r\n      return item.placeId;\r\n    },\r\n    getFirstExpande(item, list) {\r\n      if (item.children && item.children.length) {\r\n        return this.getFirstExpande(item.children[0], [...list, item.placeId]);\r\n      }\r\n      return [...list, item.placeId];\r\n    },\r\n    async getClassroomTimetable(placeId) {\r\n      const arrLessonId = this.arrLessonId;\r\n      this.tableLoading = true;\r\n      const data = await this.$api.PreviewTimetable.getClassroomTimetable({\r\n        placeId,\r\n        arrLessonId,\r\n      });\r\n      console.log(\"dataafcafs\", data);\r\n      if (data.code == 200) {\r\n        this.timetableList = data.data && data.data.list ? data.data.list : [];\r\n        this.rowSpanMerge(\"diffNoon\");\r\n      } else {\r\n        this.$message.error(\"请求失败！\" + data.message);\r\n      }\r\n      this.seleLoading = false;\r\n      this.tableLoading = false;\r\n    },\r\n    async getClassroomTree() {\r\n      const arrLessonId = this.arrLessonId;\r\n      const data = await this.$api.PreviewTimetable.getClassroomTree({\r\n        type: 1,\r\n        arrLessonId,\r\n        isUse: true,\r\n      });\r\n      if (data.code == 200) {\r\n        const list = data.data;\r\n        this.treeData = this.treeDataFormat(list);\r\n        const firstClassId = list.length ? this.getFirstClassId(list[0]) : \"\";\r\n        this.selectedKeys = [firstClassId];\r\n        const expande = list.length ? this.getFirstExpande(list[0], []) : [];\r\n        this.expandedKeys = expande;\r\n        this.getClassroomTimetable(firstClassId);\r\n      } else {\r\n        this.$message.error(\"请求失败！\" + data.message);\r\n      }\r\n      this.showTree = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n \r\n<style scoped lang=\"less\">\r\n// /deep/ table tbody tr:hover > td {\r\n//   background-color: #ffffff !important;\r\n// }\r\n// /deep/tbody tr td {\r\n//   height: 120px;\r\n//   width: 120px;\r\n//   &:hover {\r\n//     background: #13c2c2 !important;\r\n//     color: white;\r\n//   }\r\n// }\r\n.classroom-timetable {\r\n  width: 100%;\r\n  background: white;\r\n  min-height: 740px;\r\n  display: flex;\r\n  height: calc(100vh - 220px);\r\n  .left {\r\n    width: 280px;\r\n    margin-right: 20px;\r\n    overflow: auto;\r\n    .left-spin {\r\n      width: 100%;\r\n      height: calc(100% - 200px);\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n  }\r\n  .right {\r\n    flex: 1;\r\n    .rightcontent {\r\n      height: calc(100% - 32px);\r\n      overflow: auto;\r\n    }\r\n    .timetable {\r\n      min-width: 1299px;\r\n      /deep/.unit {\r\n        display: block;\r\n        position: relative;\r\n        transition: all 0.3s;\r\n        background-image: linear-gradient(to right, rgba(#409fff, 0.15), #fff);\r\n        padding: 5px 0 5px 5px;\r\n        .little-unit {\r\n          display: block;\r\n          text-align: left;\r\n        }\r\n\r\n        // &:hover {\r\n        //   background-color: #E6F7FF;\r\n        // }\r\n      }\r\n      .unit + .unit {\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n  }\r\n  .select {\r\n    height: 32px;\r\n    padding-left: 5px;\r\n  }\r\n  /deep/ .ant-table-thead > tr > th {\r\n    background-color: #409fff;\r\n    border-color: #79bcff;\r\n    color: #fff;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--11-0!../../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./ClassroomTimetable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--11-0!../../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./ClassroomTimetable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClassroomTimetable.vue?vue&type=template&id=04884703&scoped=true&\"\nimport script from \"./ClassroomTimetable.vue?vue&type=script&lang=js&\"\nexport * from \"./ClassroomTimetable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClassroomTimetable.vue?vue&type=style&index=0&id=04884703&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04884703\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}