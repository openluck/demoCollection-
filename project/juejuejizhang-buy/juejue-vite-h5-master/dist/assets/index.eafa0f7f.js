var Be=Object.defineProperty;var he=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var fe=(t,n,r)=>n in t?Be(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,ee=(t,n)=>{for(var r in n||(n={}))be.call(n,r)&&fe(t,r,n[r]);if(he)for(var r of he(n))ke.call(n,r)&&fe(t,r,n[r]);return t};import{_ as I,T as g,a,R as e,P as re,I as P,c as v,b as R,D as Ae,d as W,e as M,K as De,u as O,C as $,f as Se,g as $e,B as X,M as ye,h as Te,i as Ie,N as Re,j as Fe,k as We,l as Me,F as ze,m as te,n as Pe,S as Ye,o as je,p as Le,q as qe}from"./vendor.11e43b35.js";const Ue=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const E of o.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&i(E)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};Ue();I.defaults.baseURL="http://10.0.12.14:7009";I.defaults.withCredentials=!0;I.defaults.headers["X-Requested-With"]="XMLHttpRequest";I.defaults.headers.Authorization=`${localStorage.getItem("token")||null}`;I.defaults.headers.post["Content-Type"]="application/json";I.interceptors.response.use(t=>typeof t.data!="object"?(g.show("\u670D\u52A1\u7AEF\u5F02\u5E38\uFF01"),Promise.reject(t)):t.data.code!=200?(t.data.msg&&g.show(t.data.msg),t.data.code==401&&(window.location.href="/login"),t.data.code==413&&g.show("\u56FE\u7247\u4E0D\u5F97\u8D85\u8FC7 50kb"),Promise.reject(t.data)):t.data);const ge="http://10.0.12.14:7009",K=I.get,Y=I.post,ae={1:{icon:"canyin"},2:{icon:"fushi"},3:{icon:"jiaotong"},4:{icon:"riyong"},5:{icon:"gouwu"},6:{icon:"xuexi"},7:{icon:"yiliao"},8:{icon:"lvxing"},9:{icon:"renqing"},10:{icon:"qita"},11:{icon:"gongzi"},12:{icon:"jiangjin"},13:{icon:"zhuanzhang"},14:{icon:"licai"},15:{icon:"tuikuang"},16:{icon:"qita"}},J={normal:0,pull:1,drop:2,loading:3,success:4,failure:5},le={normal:0,abort:1,loading:2,success:3,failure:4,complete:5},ie=t=>(t&&t.startsWith("http")||(t=`${ge}${t}`),t),He="_popup-type_4v4ui_1",Ke="_header_4v4ui_7",Oe="_cross_4v4ui_20",Xe="_content_4v4ui_28",Ve="_all_4v4ui_31",Ze="_title_4v4ui_38",Ge="_expense-wrap_4v4ui_43",Je="_income-wrap_4v4ui_44",Qe="_active_4v4ui_58";var b={popupType:He,header:Ke,cross:Oe,content:Xe,all:Ve,title:Ze,expenseWrap:Ge,incomeWrap:Je,active:Qe};const ve=a.exports.forwardRef(({onSelect:t},n)=>{const[r,i]=a.exports.useState(!1),[s,o]=a.exports.useState("all"),[E,c]=a.exports.useState([]),[f,p]=a.exports.useState([]);a.exports.useEffect(()=>{(async()=>{const{data:{list:l}}=await K("/api/type/list");c(l.filter(d=>d.type==1)),p(l.filter(d=>d.type==2))})()},[]),n&&(n.current={show:()=>{i(!0)},close:()=>{i(!1)}});const F=l=>{o(l.id),i(!1),t(l)};return e.createElement(re,{visible:r,direction:"bottom",onMaskClick:()=>i(!1),destroy:!1,mountContainer:()=>document.body},e.createElement("div",{className:b.popupType},e.createElement("div",{className:b.header},"\u8BF7\u9009\u62E9\u7C7B\u578B",e.createElement(P,{type:"wrong",className:b.cross,onClick:()=>i(!1)})),e.createElement("div",{className:b.content},e.createElement("div",{onClick:()=>F({id:"all"}),className:v({[b.all]:!0,[b.active]:s=="all"})},"\u5168\u90E8\u7C7B\u578B"),e.createElement("div",{className:b.title},"\u652F\u51FA"),e.createElement("div",{className:b.expenseWrap},E.map((l,d)=>e.createElement("p",{key:d,onClick:()=>F(l),className:v({[b.active]:s==l.id})},l.name))),e.createElement("div",{className:b.title},"\u6536\u5165"),e.createElement("div",{className:b.incomeWrap},f.map((l,d)=>e.createElement("p",{key:d,onClick:()=>F(l),className:v({[b.active]:s==l.id})},l.name))))))});ve.propTypes={onSelect:R.func};const ne=a.exports.forwardRef(({onSelect:t,mode:n="date"},r)=>{const[i,s]=a.exports.useState(!1),[o,E]=a.exports.useState(new Date),c=f=>{E(f),s(!1),n=="month"?t(W(f).format("YYYY-MM")):n=="date"&&t(W(f).format("YYYY-MM-DD"))};return r&&(r.current={show:()=>{s(!0)},close:()=>{s(!1)}}),e.createElement(re,{visible:i,direction:"bottom",onMaskClick:()=>s(!1),destroy:!1,mountContainer:()=>document.body},e.createElement("div",null,e.createElement(Ae,{visible:i,value:o,mode:n,onOk:c,onCancel:()=>s(!1)})))});ne.propTypes={mode:R.string,onSelect:R.func};var B=P.createFromIconfont("//at.alicdn.com/t/font_2236655_w1mpqp7n1ni.js");const et="_add-wrap_11omu_1",tt="_header_11omu_7",at="_close_11omu_10",nt="_filter_11omu_15",st="_type_11omu_21",ot="_expense_11omu_30",ut="_active_11omu_33",ct="_income_11omu_38",rt="_time_11omu_43",lt="_arrow_11omu_52",it="_money_11omu_56",mt="_sufix_11omu_61",pt="_amount_11omu_66",Et="_type-warp_11omu_70",dt="_type-body_11omu_79",_t="_type-item_11omu_83",ht="_iconfont-wrap_11omu_90",ft="_iconfont_11omu_90",yt="_remark_11omu_116";var y={addWrap:et,header:tt,close:at,filter:nt,type:st,expense:ot,active:ut,income:ct,time:rt,arrow:lt,money:it,sufix:mt,amount:pt,typeWarp:Et,typeBody:dt,typeItem:_t,iconfontWrap:ht,iconfont:ft,remark:yt};const me=a.exports.forwardRef(({detail:t={},onReload:n},r)=>{const i=a.exports.useRef(),s=t&&t.id,[o,E]=a.exports.useState(!1),[c,f]=a.exports.useState("expense"),[p,F]=a.exports.useState([]),[l,d]=a.exports.useState([]),[_,k]=a.exports.useState({}),[x,T]=a.exports.useState(""),[z,A]=a.exports.useState(""),[G,L]=a.exports.useState(!1),[h,C]=a.exports.useState(new Date);a.exports.useEffect(()=>{console.log("detail",t),t.id&&(f(t.pay_type==1?"expense":"income"),k({id:t.type_id,name:t.type_name}),A(t.remark),T(t.amount),C(W(Number(t.date)).$d))},[t]),r&&(r.current={show:()=>{E(!0)},close:()=>{E(!1)}}),a.exports.useEffect(async()=>{const{data:{list:u}}=await K("/api/type/list");console.log("list",u);const H=u.filter(ce=>ce.type==1),_e=u.filter(ce=>ce.type==2);console.log("_expense",H),console.log("_income",_e),F(H),d(_e),s||k(H[0])},[]);const q=u=>{f(u),u=="expense"?k(p[0]):k(l[0])},D=()=>{i.current&&i.current.show()},U=u=>{C(u)},se=u=>{k(u)},oe=u=>{if(u=String(u),u!="close"){if(u=="delete"){let H=x.slice(0,x.length-1);T(H);return}if(u=="ok"){ue();return}u=="."&&x.includes(".")||u!="."&&x.includes(".")&&x&&x.split(".")[1].length>=2||T(x+u)}},ue=async()=>{if(!x){g.show("\u8BF7\u8F93\u5165\u5177\u4F53\u91D1\u989D");return}console.log("currentType",_);const u={amount:Number(x).toFixed(2),type_id:_.id,type_name:_.name,date:W(h).unix()*1e3,pay_type:c=="expense"?1:2,remark:z||""};console.log("params",u),s?(u.id=s,await Y("/api/bill/update",u),g.show("\u4FEE\u6539\u6210\u529F")):(await Y("/api/bill/add",u),T(""),f("expense"),k(p[0]),C(new Date),A(""),g.show("\u6DFB\u52A0\u6210\u529F")),E(!1),n&&n()};return e.createElement(re,{visible:o,direction:"bottom",onMaskClick:()=>E(!1),destroy:!1,mountContainer:()=>document.body},e.createElement("div",{className:y.addWrap},e.createElement("header",{className:y.header},e.createElement("span",{className:y.close,onClick:()=>E(!1)},e.createElement(P,{type:"wrong"}))),e.createElement("div",{className:y.filter},e.createElement("div",{className:y.type},e.createElement("span",{onClick:()=>q("expense"),className:v({[y.expense]:!0,[y.active]:c=="expense"})},"\u652F\u51FA"),e.createElement("span",{onClick:()=>q("income"),className:v({[y.income]:!0,[y.active]:c=="income"})},"\u6536\u5165")),e.createElement("div",{className:y.time,onClick:D},W(h).format("MM-DD")," ",e.createElement(P,{className:y.arrow,type:"arrow-bottom"}))),e.createElement("div",{className:y.money},e.createElement("span",{className:y.sufix},"\xA5"),e.createElement("span",{className:v(y.amount,y.animation)},x)),e.createElement("div",{className:y.typeWarp},e.createElement("div",{className:y.typeBody},(c=="expense"?p:l).map(u=>e.createElement("div",{onClick:()=>se(u),key:u.id,className:y.typeItem},e.createElement("span",{className:v({[y.iconfontWrap]:!0,[y.expense]:c=="expense",[y.income]:c=="income",[y.active]:_.id==u.id})},e.createElement(B,{className:y.iconfont,type:ae[u.id].icon})),e.createElement("span",null,u.name))))),e.createElement("div",{className:y.remark},G?e.createElement(M,{autoHeight:!0,showLength:!0,maxLength:50,type:"text",rows:3,value:z,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u4FE1\u606F",onChange:u=>A(u),onBlur:()=>L(!1)}):e.createElement("span",{onClick:()=>L(!0)},z||"\u6DFB\u52A0\u5907\u6CE8")),e.createElement(De,{type:"price",onKeyClick:u=>oe(u)}),e.createElement(ne,{ref:i,onSelect:U})))});me.propTypes={detail:R.object,onReload:R.func};const Ft="_item_mkxeh_1",gt="_header-date_mkxeh_7",vt="_date_mkxeh_18",xt="_money_mkxeh_22",Ct="_item-icon_mkxeh_37";var V={item:Ft,headerDate:gt,date:vt,money:xt,itemIcon:Ct};const xe=({bill:t})=>{const[n,r]=a.exports.useState(0),[i,s]=a.exports.useState(0),o=O();a.exports.useEffect(()=>{const c=t.bills.filter(p=>p.pay_type==2).reduce((p,F)=>(p+=Number(F.amount),p),0);r(c);const f=t.bills.filter(p=>p.pay_type==1).reduce((p,F)=>(p+=Number(F.amount),p),0);s(f)},[t.bills]);const E=c=>{o.push(`/detail?id=${c.id}`)};return e.createElement("div",{className:V.item},e.createElement("div",{className:V.headerDate},e.createElement("div",{className:V.date},t.date),e.createElement("div",{className:V.money},e.createElement("span",null,e.createElement("img",{src:"//s.yezgea02.com/1615953405599/zhi%402x.png",alt:"\u652F"}),e.createElement("span",null,"\xA5",i.toFixed(2))),e.createElement("span",null,e.createElement("img",{src:"//s.yezgea02.com/1615953405599/shou%402x.png",alt:"\u6536"}),e.createElement("span",null,"\xA5",n.toFixed(2))))),t&&t.bills.sort((c,f)=>f.date-c.date).map(c=>e.createElement($,{className:V.bill,key:c.id,onClick:()=>E(c),title:e.createElement(e.Fragment,null,e.createElement(B,{className:V.itemIcon,type:c.type_id?ae[c.type_id].icon:1}),e.createElement("span",null,c.type_name)),description:e.createElement("span",{style:{color:c.pay_type==2?"red":"#39be77"}},`${c.pay_type==1?"-":"+"}${c.amount}`),help:e.createElement("div",null,W(Number(c.date)).format("HH:mm")," ",c.remark?`| ${c.remark}`:"")})))};xe.propTypes={bill:R.object};const wt="_empty_1wb2f_1";var Nt={empty:wt};const Ce=({desc:t})=>e.createElement("div",{className:Nt.empty},e.createElement("img",{src:"//s.yezgea02.com/1619144597039/empty.png",alt:"\u6682\u65E0\u6570\u636E"}),e.createElement("div",null,t||"\u6682\u65E0\u6570\u636E"));Ce.propTypes={desc:R.string};const Bt="_home_pyrz3_1",bt="_header_pyrz3_7",kt="_data-wrap_pyrz3_22",At="_income_pyrz3_33",Dt="_type-wrap_pyrz3_36",St="_left_pyrz3_48",$t="_arrow_pyrz3_51",Tt="_content-wrap_pyrz3_55",It="_add_pyrz3_65";var w={home:Bt,header:bt,dataWrap:kt,income:At,typeWrap:Dt,left:St,arrow:$t,contentWrap:Tt,add:It};const Rt=()=>{const t=a.exports.useRef(),n=a.exports.useRef(),r=a.exports.useRef(),[i,s]=a.exports.useState(0),[o,E]=a.exports.useState(0),[c,f]=a.exports.useState({}),[p,F]=a.exports.useState(W().format("YYYY-MM")),[l,d]=a.exports.useState(1),[_,k]=a.exports.useState([]),[x,T]=a.exports.useState(0),[z,A]=a.exports.useState(J.normal),[G,L]=a.exports.useState(le.normal);a.exports.useEffect(()=>{h()},[l,c,p]);const h=async()=>{const{data:u}=await K(`/api/bill/list?date=${p}&type_id=${c.id||"all"}&page=${l}&page_size=5`);l==1?k(u.list):k(_.concat(u.list)),s(u.totalExpense.toFixed(2)),E(u.totalIncome.toFixed(2)),T(u.totalPage),L(le.success),A(J.success)},C=()=>{A(J.loading),l!=1?d(1):h()},q=()=>{l<x&&(L(le.loading),d(l+1))},D=()=>{t.current&&t.current.show()},U=()=>{n.current&&n.current.show()},se=()=>{r.current&&r.current.show()},oe=u=>{A(J.loading),d(1),f(u)},ue=u=>{A(J.loading),d(1),F(u)};return e.createElement("div",{className:w.home},e.createElement("div",{className:w.header},e.createElement("div",{className:w.dataWrap},e.createElement("span",{className:w.expense},"\u603B\u652F\u51FA\uFF1A",e.createElement("b",null,"\xA5 ",i)),e.createElement("span",{className:w.income},"\u603B\u6536\u5165\uFF1A",e.createElement("b",null,"\xA5 ",o))),e.createElement("div",{className:w.typeWrap},e.createElement("div",{className:w.left,onClick:D},e.createElement("span",{className:w.title},c.name||"\u5168\u90E8\u7C7B\u578B"," ",e.createElement(P,{className:w.arrow,type:"arrow-bottom"}))),e.createElement("div",{className:w.right},e.createElement("span",{className:w.time,onClick:U},p,e.createElement(P,{className:w.arrow,type:"arrow-bottom"}))))),e.createElement("div",{className:w.contentWrap},_.length?e.createElement(Se,{animationDuration:200,stayTime:400,refresh:{state:z,handler:C},load:{state:G,distance:200,handler:q}},_.map((u,H)=>e.createElement(xe,{bill:u,key:H}))):e.createElement(Ce,null)),e.createElement("div",{className:w.add,onClick:se},e.createElement(B,{type:"tianjia"})),e.createElement(ve,{ref:t,onSelect:oe}),e.createElement(ne,{ref:n,mode:"month",onSelect:ue}),e.createElement(me,{ref:r,onReload:C}))},Wt="_data_f4sv2_1",Mt="_total_f4sv2_5",zt="_time_f4sv2_13",Pt="_date_f4sv2_35",Yt="_title_f4sv2_39",jt="_expense_f4sv2_45",Lt="_income_f4sv2_51",qt="_structure_f4sv2_55",Ut="_head_f4sv2_60",Ht="_tab_f4sv2_70",Kt="_active_f4sv2_80",Ot="_content_f4sv2_88",Xt="_item_f4sv2_88",Vt="_left_f4sv2_93",Zt="_type_f4sv2_100",Gt="_name_f4sv2_115",Jt="_right_f4sv2_124",Qt="_percent_f4sv2_129",ea="_momey_f4sv2_135",ta="_proportion_f4sv2_138";var m={data:Wt,total:Mt,time:zt,date:Pt,title:Yt,expense:jt,income:Lt,structure:qt,head:Ut,tab:Ht,active:Kt,content:Ot,item:Xt,left:Vt,type:Zt,name:Gt,right:Jt,percent:Qt,momey:ea,proportion:ta};let pe=null;const aa=()=>{const t=a.exports.useRef(),[n,r]=a.exports.useState("expense"),[i,s]=a.exports.useState(W().format("YYYY-MM")),[o,E]=a.exports.useState(0),[c,f]=a.exports.useState(0),[p,F]=a.exports.useState([]),[l,d]=a.exports.useState([]),[_,k]=a.exports.useState("expense");a.exports.useEffect(()=>(x(),()=>{pe.dispose()}),[i]);const x=async()=>{const{data:h}=await K(`/api/bill/data?date=${i}`);E(h.total_expense),f(h.total_income);const C=h.total_data.filter(D=>D.pay_type==1).sort((D,U)=>U.number-D.number),q=h.total_data.filter(D=>D.pay_type==2).sort((D,U)=>U.number-D.number);F(C),d(q),A(_=="expense"?C:q)},T=h=>{r(h)},z=h=>{k(h),A(h=="expense"?p:l)},A=h=>{window.echarts&&(pe=echarts.init(document.getElementById("proportion")),pe.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:h.map(C=>C.type_name)},series:[{name:"\u652F\u51FA",type:"pie",radius:"55%",data:h.map(C=>({value:C.number,name:C.type_name})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))},G=()=>{t.current&&t.current.show()},L=h=>{s(h)};return e.createElement("div",{className:m.data},e.createElement("div",{className:m.total},e.createElement("div",{className:m.time,onClick:G},e.createElement("span",null,i),e.createElement(P,{className:m.date,type:"date"})),e.createElement("div",{className:m.title},"\u5171\u652F\u51FA"),e.createElement("div",{className:m.expense},"\xA5",o),e.createElement("div",{className:m.income},"\u5171\u6536\u5165\xA5",c)),e.createElement("div",{className:m.structure},e.createElement("div",{className:m.head},e.createElement("span",{className:m.title},"\u6536\u652F\u6784\u6210"),e.createElement("div",{className:m.tab},e.createElement("span",{onClick:()=>T("expense"),className:v({[m.expense]:!0,[m.active]:n=="expense"})},"\u652F\u51FA"),e.createElement("span",{onClick:()=>T("income"),className:v({[m.income]:!0,[m.active]:n=="income"})},"\u6536\u5165"))),e.createElement("div",{className:m.content},(n=="expense"?p:l).map(h=>e.createElement("div",{key:h.type_id,className:m.item},e.createElement("div",{className:m.left},e.createElement("div",{className:m.type},e.createElement("span",{className:v({[m.expense]:n=="expense",[m.income]:n=="income"})},e.createElement(B,{type:h.type_id?ae[h.type_id].icon:1})),e.createElement("span",{className:m.name},h.type_name)),e.createElement("div",{className:m.progress},"\xA5",Number(h.number).toFixed(2)||0)),e.createElement("div",{className:m.right},e.createElement("div",{className:m.percent},e.createElement($e,{shape:"line",percent:Number(h.number/Number(n=="expense"?o:c)*100).toFixed(2),theme:"primary"})))))),e.createElement("div",{className:m.proportion},e.createElement("div",{className:m.head},e.createElement("span",{className:m.title},"\u6536\u652F\u6784\u6210"),e.createElement("div",{className:m.tab},e.createElement("span",{onClick:()=>z("expense"),className:v({[m.expense]:!0,[m.active]:_=="expense"})},"\u652F\u51FA"),e.createElement("span",{onClick:()=>z("income"),className:v({[m.income]:!0,[m.active]:_=="income"})},"\u6536\u5165"))),e.createElement("div",{id:"proportion"}))),e.createElement(ne,{ref:t,mode:"month",onSelect:L}))},na="_user_2wwvo_1",sa="_head_2wwvo_5",oa="_info_2wwvo_14",ua="_content_2wwvo_33",ca="_logout_2wwvo_43";var Z={user:na,head:sa,info:oa,content:ua,logout:ca};const ra=()=>{const t=O(),[n,r]=a.exports.useState({}),[i,s]=a.exports.useState(""),[o,E]=a.exports.useState(!1),[c,f]=a.exports.useState("");a.exports.useEffect(()=>{p()},[]);const p=async()=>{const{data:d}=await K("/api/user/get_userinfo");r(d),f(ie(d.avatar)),s(d.signature)},F=async()=>{const{data:d}=await Y("/api/user/edit_signature",{signature:i});r(d),E(!1),g.show("\u4FEE\u6539\u6210\u529F")},l=async()=>{localStorage.removeItem("token"),t.push("/login")};return e.createElement("div",{className:Z.user},e.createElement("div",{className:Z.head},e.createElement("div",{className:Z.info},e.createElement("span",null,"\u6635\u79F0\uFF1A",n.username),e.createElement("span",null,e.createElement("img",{style:{width:30,height:30,verticalAlign:"-10px"},src:"//s.yezgea02.com/1615973630132/geqian.png",alt:""}),e.createElement("b",null,n.signature||"\u6682\u65E0\u5185\u5BB9"))),e.createElement("img",{className:Z.avatar,style:{width:60,height:60,borderRadius:8},src:c,alt:""})),e.createElement("div",{className:Z.content},e.createElement($,{hasArrow:!0,title:"\u7528\u6237\u4FE1\u606F\u4FEE\u6539",onClick:()=>t.push("/userinfo"),icon:e.createElement("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/gxqm.png",alt:""})}),e.createElement($,{hasArrow:!0,title:"\u91CD\u5236\u5BC6\u7801",onClick:()=>t.push("/account"),icon:e.createElement("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/zhaq.png",alt:""})}),e.createElement($,{hasArrow:!0,title:"\u5173\u4E8E\u6211\u4EEC",onClick:()=>t.push("/about"),icon:e.createElement("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615975178434/lianxi.png",alt:""})})),e.createElement(X,{className:Z.logout,block:!0,theme:"danger",onClick:l},"\u9000\u51FA\u767B\u5F55"),e.createElement(ye,{visible:o,title:"\u6807\u9898",closable:!0,onCancel:()=>E(!1),footer:e.createElement(X,{block:!0,theme:"primary",onClick:F},"\u786E\u8BA4")},e.createElement(M,{autoHeight:!0,showLength:!0,maxLength:50,type:"text",rows:3,value:i,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u4FE1\u606F",onChange:d=>s(d)})))},la="_auth_kpur3_1",ia="_head_kpur3_5",ma="_tab_kpur3_16",pa="_avtive_kpur3_25",Ea="_form_kpur3_30",da="_operation_kpur3_39",_a="_agree_kpur3_42";var j={auth:la,head:ia,tab:ma,avtive:pa,form:Ea,operation:da,agree:_a};const ha=()=>{const t=a.exports.useRef(),[n,r]=a.exports.useState("login"),[i,s]=a.exports.useState(""),[o,E]=a.exports.useState(""),[c,f]=a.exports.useState(""),[p,F]=a.exports.useState(""),l=a.exports.useCallback(_=>{s(_)},[]),d=async()=>{if(!o){g.show("\u8BF7\u8F93\u5165\u8D26\u53F7");return}if(!c){g.show("\u8BF7\u8F93\u5165\u5BC6\u7801");return}try{if(n=="login"){const{data:_}=await Y("/api/user/login",{username:o,password:c});localStorage.setItem("token",_.token),window.location.href="/"}else{if(!p){g.show("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801");return}if(p!=i){g.show("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}const{data:_}=await Y("/api/user/register",{username:o,password:c});g.show("\u6CE8\u518C\u6210\u529F"),r("login")}}catch(_){g.show(_.msg)}};return a.exports.useEffect(()=>{document.title=n=="login"?"\u767B\u5F55":"\u6CE8\u518C"},[n]),e.createElement("div",{className:j.auth},e.createElement("div",{className:j.head}),e.createElement("div",{className:j.tab},e.createElement("span",{className:v({[j.avtive]:n=="login"}),onClick:()=>r("login")},"\u767B\u5F55"),e.createElement("span",{className:v({[j.avtive]:n=="register"}),onClick:()=>r("register")},"\u6CE8\u518C")),e.createElement("div",{className:j.form},e.createElement($,{icon:e.createElement(B,{type:"zhanghao"})},e.createElement(M,{clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",onChange:_=>E(_)})),e.createElement($,{icon:e.createElement(B,{type:"mima"})},e.createElement(M,{clearable:!0,type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onChange:_=>f(_)})),n=="register"?e.createElement($,{icon:e.createElement(B,{type:"mima"})},e.createElement(M,{clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",onChange:_=>F(_)}),e.createElement(Te,{ref:t,charNum:4,onChange:l})):null),e.createElement("div",{className:j.operation},n=="register"?e.createElement("div",{className:j.agree},e.createElement(Ie,null),e.createElement("label",{className:"text-light"},"\u9605\u8BFB\u5E76\u540C\u610F",e.createElement("a",null,"\u300A\u6398\u6398\u624B\u672D\u6761\u6B3E\u300B"))):null,e.createElement(X,{onClick:d,block:!0,theme:"primary"},n=="login"?"\u767B\u5F55":"\u6CE8\u518C")))},fa="_header-warp_12wcp_1",ya="_block_12wcp_4",Fa="_header_12wcp_1",ga="_more_12wcp_21";var Ee={headerWarp:fa,block:ya,header:Fa,more:ga};const Q=({title:t=""})=>{const n=O();return e.createElement("div",{className:Ee.headerWarp},e.createElement("div",{className:Ee.block},e.createElement(Re,{className:Ee.header,left:e.createElement(P,{type:"arrow-left",theme:"primary",onClick:()=>n.goBack()}),title:t})))};Q.propTypes={title:R.string};const va="_detail_1wagh_1",xa="_card_1wagh_8",Ca="_type_1wagh_16",wa="_expense_1wagh_29",Na="_income_1wagh_32",Ba="_iconfont_1wagh_35",ba="_amount_1wagh_38",ka="_info_1wagh_43",Aa="_time_1wagh_48",Da="_remark_1wagh_61",Sa="_operation_1wagh_75",$a="_van-icon_1wagh_82";var N={detail:va,card:xa,type:Ca,expense:wa,income:Na,iconfont:Ba,amount:ba,info:ka,time:Aa,remark:Da,operation:Sa,vanIcon:$a};const Ta=()=>{const t=a.exports.useRef(),n=Fe(),r=O(),{id:i}=We.parse(n.search),[s,o]=a.exports.useState({});a.exports.useEffect(()=>{E()},[]);const E=async()=>{const{data:p}=await K(`/api/bill/detail?id=${i}`);o(p)},c=()=>{ye.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u8D26\u5355\uFF1F",onOk:async()=>{await Y("/api/bill/delete",{id:i}),g.show("\u5220\u9664\u6210\u529F"),r.goBack()}})},f=()=>{t.current&&t.current.show()};return e.createElement("div",{className:N.detail},e.createElement(Q,{title:"\u8D26\u5355\u8BE6\u60C5"}),e.createElement("div",{className:N.card},e.createElement("div",{className:N.type},e.createElement("span",{className:v({[N.expense]:s.pay_type==1,[N.income]:s.pay_type==2})},e.createElement(B,{className:N.iconfont,type:s.type_id?ae[s.type_id].icon:1})),e.createElement("span",null,s.type_name||"")),s.pay_type==1?e.createElement("div",{className:v(N.amount,N.expense)},"-",s.amount):e.createElement("div",{className:v(N.amount,N.incom)},"+",s.amount),e.createElement("div",{className:N.info},e.createElement("div",{className:N.time},e.createElement("span",null,"\u8BB0\u5F55\u65F6\u95F4"),e.createElement("span",null,W(Number(s.date)).format("YYYY-MM-DD HH:mm"))),e.createElement("div",{className:N.remark},e.createElement("span",null,"\u5907\u6CE8"),e.createElement("span",null,s.remark||"-"))),e.createElement("div",{className:N.operation},e.createElement("span",{onClick:c},e.createElement(B,{type:"shanchu"}),"\u5220\u9664"),e.createElement("span",{onClick:f},e.createElement(B,{type:"tianjia"}),"\u7F16\u8F91"))),e.createElement(me,{ref:t,detail:s,onReload:E}))},Ia="_account_u7md4_1",Ra="_form_u7md4_4",Wa="_btn_u7md4_9";var de={account:Ia,form:Ra,btn:Wa};const Ma=t=>{const{getFieldProps:n,getFieldError:r}=t.form,i=()=>{t.form.validateFields(async(s,o)=>{if(!s){if(console.log(o),o.newpass!=o.newpass2){g.show("\u65B0\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4");return}await Y("/api/user/modify_pass",{old_pass:o.oldpass,new_pass:o.newpass,new_pass2:o.newpass2}),g.show("\u4FEE\u6539\u6210\u529F")}})};return e.createElement(e.Fragment,null,e.createElement(Q,{title:"\u91CD\u5236\u5BC6\u7801"}),e.createElement("div",{className:de.account},e.createElement("div",{className:de.form},e.createElement($,{title:"\u539F\u5BC6\u7801"},e.createElement(M,ee({clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u539F\u5BC6\u7801"},n("oldpass",{rules:[{required:!0}]})))),e.createElement($,{title:"\u65B0\u5BC6\u7801"},e.createElement(M,ee({clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},n("newpass",{rules:[{required:!0}]})))),e.createElement($,{title:"\u786E\u8BA4\u5BC6\u7801"},e.createElement(M,ee({clearable:!0,type:"text",placeholder:"\u8BF7\u518D\u6B64\u8F93\u5165\u65B0\u5BC6\u7801\u786E\u8BA4"},n("newpass2",{rules:[{required:!0}]}))))),e.createElement(X,{className:de.btn,block:!0,theme:"primary",onClick:i},"\u63D0\u4EA4")))};var za=Me()(Ma);const Pa="_about_1urnl_1";var Ya={about:Pa};const ja=()=>e.createElement(e.Fragment,null,e.createElement(Q,{title:"\u5173\u4E8E\u6211\u4EEC"}),e.createElement("div",{className:Ya.about},e.createElement("h2",null,"\u5173\u4E8E\u9879\u76EE"),e.createElement("article",null,"\u8FD9\u4E2A\u9879\u76EE\u7684\u521D\u8877\uFF0C\u662F\u60F3\u8BA9\u4ECE\u4E8B\u524D\u7AEF\u5F00\u53D1\u7684\u540C\u5B66\uFF0C\u8FDB\u5165\u5168\u6808\u5F00\u53D1\u7684\u9886\u57DF\u3002\u5F53\u7136\uFF0C\u4E0D\u80FD\u8BF4\u5B66\u5B8C\u672C\u6559\u7A0B\u4F60\u5C31\u80FD\u80DC\u4EFB\u4EFB\u4F55\u5168\u6808\u5F00\u53D1\u3002\u4F46\u81F3\u5C11\uFF0C\u4F60\u5DF2\u7ECF\u53EF\u4EE5\u4ECE\u8BBE\u8BA1\u6570\u636E\u5E93\u8868\u5F00\u59CB\uFF0C\u628A\u81EA\u5DF1\u7684\u4E00\u4E2A\u60F3\u6CD5\u8F6C\u5316\u6210\u5B9E\u9645\u53EF\u89C1\u7684\u9879\u76EE\u3002"),e.createElement("h2",null,"\u5173\u4E8E\u4F5C\u8005"),e.createElement("article",null,"\u4ECE 2015 \u5E74\u5B9E\u4E60\u5F00\u59CB\u81F3\u4ECA\uFF0C\u6709 6 \u5E74\u524D\u7AEF\u5F00\u53D1\u7ECF\u9A8C\u3002\u867D\u7136\u6CA1\u6709\u5728\u5927\u5382\u5446\u8FC7\uFF0C\u4F46\u662F\u6B63\u56E0\u5982\u6B64\uFF0C\u6211\u6DF1\u77E5\u594B\u6218\u5728\u4E2D\u5C0F\u5382\u7684\u524D\u7AEF\u5F00\u53D1\u5728\u4ECE\u4E1A 1 \u5230 3 \u5E74\u540E\uFF0C\u4F1A\u9047\u5230\u4EC0\u4E48\u74F6\u9888\uFF0C\u5C0F\u518C\u4E2D\u4E5F\u8BE6\u7EC6\u7684\u63CF\u8FF0\u4E86\u600E\u6837\u4ECE\u521D\u7EA7\u5230\u4E2D\u7EA7\u7684\u8FDB\u9636\u4E4B\u8DEF\u3002"),e.createElement("h2",null,"\u5173\u4E8E\u5C0F\u518C"),e.createElement("article",null,"\u8FD9\u662F\u4E00\u672C\u5168\u6808\u5C0F\u518C\uFF0C\u670D\u52A1\u7AEF\u91C7\u7528 Node \u4E0A\u5C42\u67B6\u6784 Egg.js\uFF0C\u524D\u7AEF\u91C7\u7528 React \u6846\u67B6 + Zarm \u79FB\u52A8\u7AEF\u7EC4\u4EF6\u5E93\u3002\u672C\u5C0F\u518C\u81F4\u529B\u4E8E\u8BA9\u540C\u5B66\u4EEC\u5B66\u4F1A\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u6D41\u7A0B\uFF0C\u4ECE\u8BBE\u8BA1\u6570\u636E\u5E93\u5230\u63A5\u53E3\u7684\u7F16\u5199\uFF0C\u524D\u7AEF\u7684\u63A5\u53E3\u6570\u636E\u5BF9\u63A5\u548C\u9875\u9762\u5236\u4F5C\uFF0C\u518D\u5230\u7EBF\u4E0A\u73AF\u5883\u7684\u90E8\u7F72\u3002\u7531\u4E8E\u672C\u4EBA\u7528\u7684\u662F Mac\uFF0C\u4E3A\u4E86\u7167\u987E\u5230 Windows \u7CFB\u7EDF\u7684\u540C\u5B66\uFF0C\u5168\u7A0B\u5173\u952E\u6B65\u9AA4\u90FD\u4F1A\u6709 Windows \u90E8\u5206\u7684\u8BB2\u89E3\u3002"))),La="_userinfo_1wov8_1",qa="_item_1wov8_8",Ua="_title_1wov8_12",Ha="_avatar_1wov8_16",Ka="_avatar-url_1wov8_20",Oa="_desc_1wov8_26",Xa="_upload_1wov8_32",Va="_signature_1wov8_35";var S={userinfo:La,item:qa,title:Ua,avatar:Ha,avatarUrl:Ka,desc:Oa,upload:Xa,signature:Va};const Za=()=>{const t=O(),[n,r]=a.exports.useState({}),[i,s]=a.exports.useState(""),[o,E]=a.exports.useState(""),c=localStorage.getItem("token");a.exports.useEffect(()=>{f()},[]);const f=async()=>{const{data:l}=await K("/api/user/get_userinfo");r(l),s(ie(l.avatar)),E(l.signature)},p=l=>{if(console.log("file.file",l.file),l&&l.file.size>200*1024){g.show("\u4E0A\u4F20\u5934\u50CF\u4E0D\u5F97\u8D85\u8FC7 200 KB\uFF01\uFF01");return}let d=new FormData;d.append("file",l.file),I({method:"post",url:`${ge}/upload`,data:d,headers:{"Content-Type":"multipart/form-data",Authorization:c}}).then(_=>{s(ie(_.data))})},F=async()=>{await Y("/api/user/edit_userinfo",{signature:o,avatar:i}),g.show("\u4FEE\u6539\u6210\u529F"),t.goBack()};return e.createElement(e.Fragment,null,e.createElement(Q,{title:"\u7528\u6237\u4FE1\u606F"}),e.createElement("div",{className:S.userinfo},e.createElement("h1",null,"\u4E2A\u4EBA\u8D44\u6599"),e.createElement("div",{className:S.item},e.createElement("div",{className:S.title},"\u5934\u50CF"),e.createElement("div",{className:S.avatar},e.createElement("img",{className:S.avatarUrl,src:i,alt:""}),e.createElement("div",{className:S.desc},e.createElement("span",null,"\u652F\u6301 jpg\u3001png\u3001jpeg \u683C\u5F0F\u5927\u5C0F 200KB \u4EE5\u5185\u7684\u56FE\u7247"),e.createElement(ze,{className:S.filePicker,onChange:p,accept:"image/*"},e.createElement(X,{className:S.upload,theme:"primary",size:"xs"},"\u70B9\u51FB\u4E0A\u4F20"))))),e.createElement("div",{className:S.item},e.createElement("div",{className:S.title},"\u4E2A\u6027\u7B7E\u540D"),e.createElement("div",{className:S.signature},e.createElement(M,{clearable:!0,type:"text",value:o,placeholder:"\u8BF7\u8F93\u5165\u4E2A\u6027\u7B7E\u540D",onChange:l=>E(l)}))),e.createElement(X,{onClick:F,style:{marginTop:50},block:!0,theme:"primary"},"\u4FDD\u5B58")))},we=[{path:"/",component:Rt},{path:"/data",component:aa},{path:"/user",component:ra},{path:"/login",component:ha},{path:"/detail",component:Ta},{path:"/account",component:za},{path:"/about",component:ja},{path:"/userinfo",component:Za}],Ga="_tab_1udd2_1";var Ja={tab:Ga};const Ne=({showNav:t})=>{const[n,r]=a.exports.useState("/"),i=O(),s=o=>{r(o),i.push(o)};return e.createElement(te,{visible:t,className:Ja.tab,activeKey:n,onChange:s},e.createElement(te.Item,{itemKey:"/",title:"\u8D26\u5355",icon:e.createElement(B,{type:"zhangdan"})}),e.createElement(te.Item,{itemKey:"/data",title:"\u7EDF\u8BA1",icon:e.createElement(B,{type:"tongji"})}),e.createElement(te.Item,{itemKey:"/user",title:"\u6211\u7684",icon:e.createElement(B,{type:"wode"})}))};Ne.propTypes={showNav:R.bool};const Qa=()=>{const t=Fe(),{pathname:n}=t,r=["/","/data","/user"],[i,s]=a.exports.useState(!1);return a.exports.useEffect(()=>{console.log("location",t),console.log("pathname",n),console.log("routes",we),s(r.includes(n))},[n]),e.createElement(Pe,{primaryColor:"#007fff"},e.createElement(e.Fragment,null,e.createElement(Ye,null,we.map(o=>e.createElement(je,{exact:!0,key:o.path,path:o.path},e.createElement(o.component,null)))),e.createElement(Ne,{showNav:i})))};Le.render(e.createElement(e.StrictMode,null,e.createElement(qe,null,e.createElement(Qa,null))),document.getElementById("root"));
